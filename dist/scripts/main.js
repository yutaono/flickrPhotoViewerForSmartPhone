!function(a,b){function c(b){a(".card").fadeOut(800,function(){a("img",this).remove(),a(this).remove()});var c=b.attr("id");return a(g).each(function(b){if(this.id===c){var e=(d(this,".jpg"),h[b]);a("#container").append('<div class="card"></div>'),a(".card").append(e),a("img",".card").addClass("original"),a(".card").center().fadeIn(1e3)}}),!0}function d(a,b){var c="http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret;return c+b}function e(b){var c="";a(b).each(function(){var a=d(this,"_m.jpg"),b=d(this,".jpg");g.push(this),c+="<img id='"+this.id+"' class='thumbnail' src='"+a+"' width='76' height='76' alt=''>";var e=new Image;e.src=b,e.name=this.id,h.push(e)}),a("#result").append(c)}function f(b){var c=a.Deferred();return a.ajax({type:b.method,url:b.url,data:b.params}).done(function(a){c.resolve(a)}).fail(function(){console.log("fail..."),c.reject()}),c.promise()}a(function(){var b={};b.url="https://api.flickr.com/services/rest/",b.method="GET",b.params={method:"flickr.photos.search",per_page:40,text:"有村架純",sort:"interestingness-desc",api_key:"69558575cccfeb6086b6193f3f8d1776",format:"json",nojsoncallback:1},f(b).done(function(a){e(a.photos.photo)}),a("#result").on({click:function(){i?(a(".card").fadeOut(800,function(){a("img",this).remove(),a(this).remove()}),a("#result").animate({opacity:1},function(){i=!1})):(c(a(this)),a("#result").animate({opacity:.4},function(){i=!0}))}},".thumbnail"),a("#container").on({click:function(){a(".card").fadeOut(800),a("#result").animate({opacity:1},function(){i=!1})}},".card")});var g=[],h=[],i=!1;jQuery.fn.center=function(){return this.css("position","fixed"),this.css("top",(a(b).height()-a(this).height())/2+"px"),this.css("left",(a(b).width()-this.width())/2+a(b).scrollLeft()+"px"),this}}(window.jQuery,window,document);